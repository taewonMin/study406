<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="board">

	<resultMap class="board" id="boardMap">
		<result property="boardGroup" column="BOARD_GROUP"/>
		<result property="boardNo" column="BOARD_NO"/>
		<result property="boardTitle" column="BOARD_TITLE"/>
		<result property="boardContent" column="BOARD_CONTENT"/>
		<result property="boardDate" column="BOARD_DATE"/>
		<result property="memId" column="MEM_ID"/>
		<result property="boardCnt" column="BOARD_CNT"/>
	</resultMap>

	<select id="selectBoardList" resultMap="boardMap">
		select * 
		 from board
		where 1=1
	      and board_group = #boardGroup#
		<isNotEmpty property="searchType">
			<isNotEmpty property="keyword">
			   and #searchType# like '%' || #keyword# || '%' 
			</isNotEmpty>
		</isNotEmpty>
		 order by board_no desc
		 limit #firstRecNo# , #lastRecNo#
	</select>
	
	<select id="getBoardListCnt" resultClass="int">
		select count(*)
		  from board
		 where 1=1
		   and board_group = #boardGroup#
		<isNotEmpty property="searchType">
			<isNotEmpty property="keyword">
		   and #searchType# like '%' || #keyword# || '%' 
			</isNotEmpty>
		</isNotEmpty>
	</select>

	<select id="getBoardNextNo" resultClass="int">
		select max(board_no) from board
	</select>
	
	<insert id="inserBoard">
		INSERT INTO BOARD(board_no,board_group,board_title,board_content,board_date,mem_id)
		VALUES(#boardNo#,#boardGroup#,#boardTitle#,#boardContent#,now(),#memId#)
	</insert>
	
	<select id="getBoard" resultMap="boardMap">
		select * from board 
		 where board_no = #boardNo#
	</select>
	
</sqlMap>